<%- include('partials/header') %>
<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Blog | Home</title>
  <link rel="stylesheet" href="/style.css" />
  <style>
    body {
  background: linear-gradient(135deg, #141E30, #243B55);
  background: url("https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?auto=format&fit=crop&w=1950&q=80")
              no-repeat center center fixed;
  background-size: cover;
  color: #fff;
  font-family: "Poppins", sans-serif;
  margin: 0;
  padding: 0;
}

/* ===== HEADER ===== */
header {
  text-align: center;
  padding: 30px 0;
}
h1 {
  font-size: 2.5rem;
  margin-bottom: 10px;
  color: #ffce00;
  letter-spacing: 1px;
}

/* ===== ADD BUTTON ===== */
.add-btn {
  display: inline-block;
  background: #ffce00;
  color: #000;
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 600;
  transition: 0.3s;
  margin: 5px;
}
.add-btn:hover {
  background: #ffd633;
  transform: scale(1.05);
}

/* ===== BLOG CONTAINER ===== */
.blog-container {
  max-width: 1100px;
  margin: 40px auto;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 25px;
  padding: 0 20px;
}
.blog {
  background: rgba(255, 255, 255, 0.1);
  padding: 25px;
  border-radius: 12px;
  transition: transform 0.3s, background 0.3s;
  backdrop-filter: blur(6px);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.blog:hover {
  transform: translateY(-5px);
  background: rgba(255, 255, 255, 0.2);
}
.blog h2 {
  color: #ffce00;
  font-size: 1.4rem;
  margin-bottom: 10px;
}
.blog p {
  color: #eee;
  line-height: 1.6;
  font-size: 0.95rem;
}
small {
  display: block;
  margin-top: 10px;
  color: #ccc;
  font-size: 0.85rem;
}

/* ===== ACTION BUTTONS ===== */
.actions {
  margin-top: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
}
.actions form {
  margin: 0;
}
.btn {
  color: #ffce00;
  text-decoration: none;
  font-weight: 600;
  transition: 0.2s;
  padding: 6px 12px;
  border: 1px solid #ffce00;
  border-radius: 6px;
  margin-right: 10px;
}
.btn:hover {
  background: #ffce00;
  color: #000;
}
.btn.delete {
  color: #ff4d4d;
  border-color: #ff4d4d;
}
.btn.delete:hover {
  background: #ff4d4d;
  color: #fff;
}

/* ===== FOOTER ===== */
footer {
  text-align: center;
  margin: 50px 0 20px;
  color: #ebdb07;
  font-size: 0.9rem;
  letter-spacing: 0.3px;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  h1 {
    font-size: 2rem;
  }
  .blog {
    padding: 20px;
  }
  .btn {
    margin-top: 10px;
    width: 100%;
    text-align: center;
  }
  .actions {
    flex-direction: column;
    gap: 10px;
  }
}

  </style>
</head>
<body>
  <header>
    <h1>My Blog</h1>
    <a class="add-btn" href="/new">+ Add New Post</a>
    <% if (user) { %>
      <a class="add-btn" href="/profile" style="background:#00c2ff;">Profile</a>
      <a class="add-btn" href="/logout" style="background:#ff4d4d; color:white;">Logout</a>
    <% } else { %>
      <a class="add-btn" href="/login" style="background:#00c2ff;">Login</a>
    <% } %>
  </header>

  <main class="blog-container">
    <% if (!blogs || blogs.length === 0) { %>
      <div class="blog" style="text-align:center;">
        <h2>No blog posts yet üïäÔ∏è</h2>
        <p>Click ‚ÄúAdd New Post‚Äù above to create your first article!</p>
      </div>
    <% } else { %>
      <% blogs.forEach(blog => { %>
        <div class="blog">
          <h2><%= blog.title %></h2>
          <p><%= blog.content.substring(0, 120) %>...</p>
          <small>
            By <%= blog.user?.username || "Unknown" %> ‚Äî 
            <%= blog.date ? new Date(blog.date).toDateString() : "No Date" %>
          </small>

```
      <% if (user && blog.user && String(user._id) === String(blog.user._id || blog.user)) { %>
        <div class="actions">
          <a href="/edit-blog/<%= blog._id %>" class="btn"> Edit</a>
          <form action="/delete-blog/<%= blog._id %>?_method=DELETE" method="POST">
            <button type="submit" class="btn delete"> Delete</button>
          </form>
        </div>
      <% } %>
    </div>
  <% }) %>
<% } %>
```

  </main>

  <footer>
    <p>¬© <%= new Date().getFullYear() %> My Blog App ‚Äî Built with ‚ù§Ô∏è by Antony silverson</p>
  </footer>
</body>
</html>

<%- include('partials/footer') %>
